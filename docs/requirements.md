# Приложение "Информационный радар"

## 1. Summary

Создать интерактивное приложение для сбора, просмотра, фильтрации и постобработки информации из различных интернет источников для быстрого ознакомления с трендами и актуальной информацией по интересующим направлениям.

## 2. Ключевые концепции

**Источник**: это внешний ресурс, поставляющий контент в виде набора тематических разделов со списком статей.

**Раздел**: это тематическая категория внутри источника.

**Статья**: это конкретный пост внутри раздела. У статьи есть глобальные поля, общие для всех источников (Author, Date, Rating, Views, Comments, Bookmarks) и локальные поля, уникальные для каждого источника.

## 3. Функциональные требования

### 3.1. Сбор статей

### 3.1.1. Сбор новых статей

Приложение должно уметь сохранять статьи источников во внутреннюю базу данных приложения по команде пользователя.

**Cutoff**. Должна быть возможность задать глобальную cutoff-дату: порог, статьи с датой публикацией раньше которого не входят в набор для сохранения. Также приложение должно поддерживать функционал локальной cutoff-даты для команды выборки, которая переопределяет глобальную. Если ни локальная, ни глобальная cutoff-дата не задана, приложение должно выбирать все статьи источника.

**Фильтр по разделам источников**. Должна быть возможность указывать произвольные источники и их разделы в комбинациях, по которым будет проходить выборка новых статей.

### 3.1.2. Обновление метаданных существующих статей

Приложение должно уметь обновлять метаданные сохраненных статей источников во внутренней базе данных приложения по команде пользователя.

**Depth**. Должна быть возможность задать глобальный параметр глубины в днях: порог, статьи с датой публикацией раньше которого не входят в набор для выборки данных. Также приложение должно поддерживать функционал локального depth-параметра для команды обновления метаданных, которая переопределяет глобальную. Если ни локальная, ни глобальная cutoff-дата не задана, приложение должно выбирать все статьи источника.

**Фильтр по разделам источников**. Должна быть возможность указывать произвольные источники и их разделы в комбинациях, по которым будет проходить обновление существующих статей.

### 3.2. Просмотр списка статей

Должна быть возможность постраничного просмотра всех сохраненных статей всех разделов всех источников в постраничном виде, по умолчанию отсортированных по дате публикации в обратном порядке.

Должна быть возможность сортировки (ASC, DESC) по всем глобальным полям статьи по команде пользователя.

Должна быть возможность выбора конкретной статьи из списка.

Должна быть возможность открывать выбранную статью в браузере пользователя с помощью команды, введенной пользователем.

### 3.3. Фильтрация списка статей

Приложение должно поддерживать многоступенчатую логику фильтрации, где каждый следующий фильтр накладывается на предыдущий. Список фильтров в порядке от более общего к более частному по умолчанию:

- Фильтр по источникам (множественный выбор из списка источников)
- Фильтр по разделам источников (множественный выбор из списка разделов источников)
- Фильтр по пользовательским тэгам (множественный выбор из списка предопределенных тэгов, указание возможности выбора всех не-тегированных статей)
- Фильтр по вхождению точной фразы в название статьи
- Фильтр по автору статьи (множественный выбор из авторов)
- Фильтр по дате
  - новее пороговой даты
  - диапазон дат
- Фильтр по рейтингу
  - выше порогового значения
  - диапазон значений
- Фильтр по просмотрам
  - выше порогового значения
  - диапазон значений
- Фильтр по комментариям
  - выше порогового значения
  - диапазон значений
- Фильтр по закладкам
  - выше порогового значения
  - диапазон значений

Должна быть возможность задавать порядок наложения фильтров вручную: поднимать и опуска строки в списке, сбрасывать на порядок по умолчанию.

Должна быть возможность выбрать произвольный набор фильтров из списка, которые будут применяться к отображению сохраненных статей.

Должна быть возможность быстрой фильтрации по вхождению точной фразы в название статьи командой сразу из списка статей.

### 3.4. Просмотр статей

Должна быть возможность открывать текст сохраненной статьи для просмотра (в формате Markdown с упрощениями) командой из списка всех статей.

Статья должна отображаться с шапкой с выводом параметров статьи и прокручиваемым телом статьи.

Должна быть возможность открывать выбранную статью в браузере пользователя с помощью команды, введенной пользователем.

### 3.5 Тегирование статей

Должна быть возможность тегировать сохраненные статьи в базе данных вручную списком преопределенных тэгов:

- `read` (пометка статьи в список "к прочтению")
- `interesting` (пометка статьи на важность/нужность информации)
- `archive` (пометка статьи в архивный список)

Должна быть возможность протегировать статью как из общего списка статей, так и из режима просмотра конкретной статьи.

Теги `read` и `archive` взаимоисключающие. Если пользователь устанавливает `read`, то сбрасывается `archive` (если есть) и наоборот.

Строки в списке статей для разных комбинаций тэгов должны иметь разные стили:

- `not read`, `not interesting`, `not archive` - normal style
- `not read`, `not interesting`, `archive` - strikethrough style
- `not read`, `interesting`, `not archive` - yellow bold style
- `not read`, `interesting`, `archive` - yellow bold strikethrough style
- `read`, `not interesting`, `not archive` - blue bold style
- `read`, `not interesting`, `archive` - blue bold style (невозможная ситуация, `read` и `archive` не могут быть установлены вместе)
- `read`, `interesting`, `not archive` - yellow bold style
- `read`, `interesting`, `archive` - yellow bold style (невозможная ситуация, `read` и `archive` не могут быть установлены вместе)

### 3.6. Постобработка

TBD

## 4. Нефункциональные требования

- **Usability** Приложение должно быть консольным, но полностью интерактивным
- **Usability** Интерфейс должен оставаться отзывчивым во время операций сбора данных (использование асинхронного подхода).
- **Fault tolerance** Приложение должно уметь восстанавливаться после ошибок, например, при сбое сбора данных при повторном сборе корректно обрабатывать оставшиеся статьи
- **Respectful Scrapping** Приложение не должно спамить запросами страниц к источникам, должно имитировать действия пользователя и использовать корректный User-Agent при запросах, чтобы не получить бан по IP от ресурса